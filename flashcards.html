<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BlueBadge â€“ Flashcards</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <nav class="top-nav">
      <div class="nav-brand"><h1><a href="index.html" style="text-decoration:none; color:inherit;">ðŸš” BlueBadge</a></h1></div>
      <div class="nav-links">
        <a href="index.html" data-i18n="dashboard">Dashboard</a>
        <a href="quiz.html" data-i18n="daily_quiz">Dagelijkse Quiz</a>
        <a href="cognitief.html" data-i18n="cognitive_skills">Cognitieve Vaardigheden</a>
        <a href="taal.html" data-i18n="language_training">Taaltraining</a>
        <a href="voortgang.html" data-i18n="progress">Voortgang</a>
        <select id="language-select" aria-label="Language" style="margin-left: 8px;">
          <option value="nl">NL</option>
          <option value="fr">FR</option>
          <option value="en">EN</option>
          <option value="de">DE</option>
          <option value="tr">TR</option>
        </select>
      </div>
    </nav>
    <div class="hero-section">
      <h2>FLASHCARDS</h2>
      <p data-i18n="vocabulary">Woordenschat</p>
    </div>
  </header>

  <main style="max-width:900px;margin:24px auto;">
    <section class="test-interface" style="display:block;">
      <div class="test-container" style="text-align:center;">
        <div id="fc-card" style="background:#fff;color:#000;border:1px solid #e5e7eb;border-radius:12px;padding:24px;min-height:180px;cursor:pointer;">
          <div id="fc-front"><h3 id="fc-word">...</h3></div>
          <div id="fc-back" style="display:none;">
            <p id="fc-meaning"></p>
            <p id="fc-example" style="font-style:italic;"></p>
          </div>
        </div>
        <div style="margin-top:16px;display:flex;gap:8px;justify-content:center;flex-wrap:wrap;">
          <button class="word-btn study" id="fc-hard">Zor</button>
          <button class="word-btn know" id="fc-good">Ä°yi</button>
          <button class="word-btn next" id="fc-easy">Kolay</button>
          <button class="word-btn next" id="fc-next">Sonraki</button>
        </div>
        <p style="margin-top:8px;color:var(--text-secondary);"><span id="fc-progress">0/0</span></p>
      </div>
    </section>
  </main>

  <footer>
    <p>Â© 2025 BlueBadge | Classified Training System</p>
  </footer>

  <script src="i18n.js"></script>
  <script>
    let deck = [];
    let queue = [];
    let idx = 0;
    let flipped = false;

    async function loadWords(){
      try { const r = await fetch('data/woorden.json'); deck = await r.json(); } catch { deck = []; }
      if (!Array.isArray(deck)) deck = [];
      // kÄ±sa desteyi Ã¼ret (karÄ±ÅŸÄ±k 30)
      queue = shuffle(deck).slice(0, 30).map((w,i)=>({ ...w, due: Date.now(), ef:2.3, interval:0, reps:0, id:i }));
      idx = 0; updateProgress(); show();
    }
    function shuffle(a){ const s=[...a]; for(let i=s.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[s[i],s[j]]=[s[j],s[i]]} return s }
    function show(){
      const card = queue[idx]; if(!card){ document.getElementById('fc-word').textContent='Bitti'; return; }
      flipped=false; document.getElementById('fc-back').style.display='none'; document.getElementById('fc-front').style.display='block';
      document.getElementById('fc-word').textContent = card.woord || '...';
      document.getElementById('fc-meaning').textContent = card.betekenis || '';
      document.getElementById('fc-example').textContent = '"'+(card.voorbeeld||'')+'"';
    }
    function flip(){ flipped=!flipped; document.getElementById('fc-back').style.display= flipped?'block':'none'; document.getElementById('fc-front').style.display= flipped?'none':'block'; }

    function rate(grade){
      const card = queue[idx]; if(!card) return; // SuperMemo-2 basitleÅŸtirilmiÅŸ
      const q = Math.max(0, Math.min(5, grade));
      if (q < 3) {
        card.reps = 0; card.interval = 1; // kÄ±sa
      } else {
        if (card.reps === 0) card.interval = 1;
        else if (card.reps === 1) card.interval = 6;
        else card.interval = Math.round(card.interval * card.ef);
        card.reps += 1;
        card.ef = Math.max(1.3, card.ef + (0.1 - (5 - q) * (0.08 + (5 - q) * 0.02)));
      }
      card.due = Date.now() + card.interval * 24*60*60*1000;
      // sÄ±radaki karta geÃ§ ve geÃ§ kalmÄ±ÅŸ kartlarÄ± Ã¶ne getir
      idx = (idx + 1) % queue.length;
      queue.sort((a,b)=>a.due-b.due);
      updateProgress(); show();
    }
    function next(){ idx = (idx + 1) % queue.length; updateProgress(); show(); }
    function updateProgress(){ document.getElementById('fc-progress').textContent = (idx+1)+"/"+queue.length }

    document.addEventListener('DOMContentLoaded', ()=>{
      loadWords();
      document.getElementById('fc-card').addEventListener('click', flip);
      document.getElementById('fc-hard').addEventListener('click', ()=>rate(2));
      document.getElementById('fc-good').addEventListener('click', ()=>rate(4));
      document.getElementById('fc-easy').addEventListener('click', ()=>rate(5));
      document.getElementById('fc-next').addEventListener('click', next);
    });
  </script>
</body>
</html>